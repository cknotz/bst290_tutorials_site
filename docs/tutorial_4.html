<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Carlo Knotz">

<title>Tutorial 4: Data visualization with ggplot2 – R Tutorials for BST290</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tutorial_5.html" rel="next">
<link href="./tutorial_3.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Tutorials for BST290</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tutorial_4.html">Tutorial 4: Data visualization with <code>ggplot2</code></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hei!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 0: Installation &amp; Setup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 1: Your first steps in <code>R</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 2: Importing &amp; exploring your data</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 3: Data cleaning &amp; management</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Tutorial 4: Data visualization with <code>ggplot2</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 5: Confidence intervals</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 6: Tabular Analysis &amp; the $\chi^2$ test</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_7a.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 7a: <em>t</em>-test</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_7b.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 7b: Correlation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 8: Bivariate linear regression</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 9: Multivariate linear regression</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 10: <em>It depends!</em> Interactive regression models</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 11: Logistic regression for binomial dependent variables</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup"><span class="header-section-number">2</span> Setup</a></li>
  <li><a href="#visualizing-data" id="toc-visualizing-data" class="nav-link" data-scroll-target="#visualizing-data"><span class="header-section-number">3</span> Visualizing data</a>
  <ul class="collapse">
  <li><a href="#scatterplots" id="toc-scatterplots" class="nav-link" data-scroll-target="#scatterplots"><span class="header-section-number">3.1</span> Scatterplots</a>
  <ul class="collapse">
  <li><a href="#the-graph-window" id="toc-the-graph-window" class="nav-link" data-scroll-target="#the-graph-window"><span class="header-section-number">3.1.1</span> The graph window</a></li>
  <li><a href="#defining-the-dataset" id="toc-defining-the-dataset" class="nav-link" data-scroll-target="#defining-the-dataset"><span class="header-section-number">3.1.2</span> Defining the dataset</a></li>
  <li><a href="#defining-the-variables-and-their-roles-aesthetics" id="toc-defining-the-variables-and-their-roles-aesthetics" class="nav-link" data-scroll-target="#defining-the-variables-and-their-roles-aesthetics"><span class="header-section-number">3.1.3</span> Defining the variables and their roles (‘aesthetics’)</a></li>
  <li><a href="#defining-the-contents-geometric-objects" id="toc-defining-the-contents-geometric-objects" class="nav-link" data-scroll-target="#defining-the-contents-geometric-objects"><span class="header-section-number">3.1.4</span> Defining the contents (‘geometric objects’)</a></li>
  <li><a href="#informative-labels" id="toc-informative-labels" class="nav-link" data-scroll-target="#informative-labels"><span class="header-section-number">3.1.5</span> Informative labels</a></li>
  <li><a href="#changing-the-overall-look-of-the-graph-theme" id="toc-changing-the-overall-look-of-the-graph-theme" class="nav-link" data-scroll-target="#changing-the-overall-look-of-the-graph-theme"><span class="header-section-number">3.1.6</span> Changing the overall look of the graph (‘theme’)</a></li>
  </ul></li>
  <li><a href="#bivariate-boxplots" id="toc-bivariate-boxplots" class="nav-link" data-scroll-target="#bivariate-boxplots"><span class="header-section-number">3.2</span> Bivariate boxplots</a></li>
  <li><a href="#univariate-graphs-histograms" id="toc-univariate-graphs-histograms" class="nav-link" data-scroll-target="#univariate-graphs-histograms"><span class="header-section-number">3.3</span> Univariate graphs: Histograms</a>
  <ul class="collapse">
  <li><a href="#drawing-a-histogram" id="toc-drawing-a-histogram" class="nav-link" data-scroll-target="#drawing-a-histogram"><span class="header-section-number">3.3.1</span> Drawing a histogram</a></li>
  <li><a href="#improving-appearance" id="toc-improving-appearance" class="nav-link" data-scroll-target="#improving-appearance"><span class="header-section-number">3.3.2</span> Improving appearance</a></li>
  <li><a href="#changing-the-number-of-bins" id="toc-changing-the-number-of-bins" class="nav-link" data-scroll-target="#changing-the-number-of-bins"><span class="header-section-number">3.3.3</span> Changing the number of “bins”</a></li>
  <li><a href="#final-polishing" id="toc-final-polishing" class="nav-link" data-scroll-target="#final-polishing"><span class="header-section-number">3.3.4</span> Final polishing</a></li>
  </ul></li>
  <li><a href="#univariate-graphs-bar-graphs" id="toc-univariate-graphs-bar-graphs" class="nav-link" data-scroll-target="#univariate-graphs-bar-graphs"><span class="header-section-number">3.4</span> Univariate graphs: Bar graphs</a></li>
  </ul></li>
  <li><a href="#linking-data-management-and-visualization" id="toc-linking-data-management-and-visualization" class="nav-link" data-scroll-target="#linking-data-management-and-visualization"><span class="header-section-number">4</span> Linking data management and visualization</a>
  <ul class="collapse">
  <li><a href="#calculating-summary-statistics" id="toc-calculating-summary-statistics" class="nav-link" data-scroll-target="#calculating-summary-statistics"><span class="header-section-number">4.1</span> Calculating summary statistics</a></li>
  <li><a href="#visualizing-the-result" id="toc-visualizing-the-result" class="nav-link" data-scroll-target="#visualizing-the-result"><span class="header-section-number">4.2</span> Visualizing the result</a></li>
  </ul></li>
  <li><a href="#exporting-graphs-with-ggsave" id="toc-exporting-graphs-with-ggsave" class="nav-link" data-scroll-target="#exporting-graphs-with-ggsave"><span class="header-section-number">5</span> Exporting graphs with <code>ggsave()</code></a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion"><span class="header-section-number">6</span> Conclusion</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="tutorial_4.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tutorial 4: Data visualization with <code>ggplot2</code></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Carlo Knotz </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>You made it through the most tedious parts, the descriptive tables and data transformation procedures. Data visualization is where the fun begins.</p>
<p>If you are able to visualize your data, you can turn boring and dull rows of numbers and symbols into nice and informative graphs. In other words, you can do or produce something you and other people can see and use directly in reports, on websites, etc. Obviously, that is a skill that you can directly use at many workplaces where (social) data analysts work. And, if you keep working on it, you will eventually be able to produce more and more advanced and beautiful graphs.</p>
<p>In this tutorial, you will learn the basics of visualizing data with <code>ggplot2</code>, which is one of several ways to visualize data in <code>R</code>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>You learn <code>ggplot2</code> here for a few reasons:</p>
<ol type="1">
<li>It is arguably the most widely used package for data visualization in <em>R</em> (and generally one of the most frequently downloaded packages overall). The <em>BBC Data Team</em>, for example, uses <code>ggplot2</code> to make graphics.</li>
<li>It is extremely flexible. You can generate a wide range of different types of graphs, and each graph can be customized down to the finest detail (as long as you know what you have to do).</li>
<li>It can be extended. One extension called <code>ggiraph</code> allows you to make <code>ggplot2</code> graphs interactive.</li>
</ol>
<p>Obviously, this tutorial will only cover the basics — but you can take a look at some examples of what you will eventually be able to do with <code>ggplot2</code> and <code>R</code>:</p>
<ul>
<li><a href="https://bbc.github.io/rcookbook/" class="uri">https://bbc.github.io/rcookbook/</a></li>
<li><a href="https://www.r-graph-gallery.com/" class="uri">https://www.r-graph-gallery.com/</a></li>
<li><a href="https://www.data-to-art.com/" class="uri">https://www.data-to-art.com/</a></li>
</ul>
<p>(The first two websites are also generally highly recommended if you want to look for example code for a particular type of graph!)</p>
<p>For a more thorough introduction to data visualization with <code>R</code> see <a href="https://ggplot2-book.org/" class="uri">https://ggplot2-book.org/</a> or <a href="https://r-graphics.org/index.html" class="uri">https://r-graphics.org/index.html</a>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p><em>Hvis du ønsker å lese en norsk tekst <strong>i tillegg</strong>: “Lær deg R”, Kapittel 3 &amp; 5. OBS: Boken bruker en annen ‘dialekt’ (<code>base R</code>) enn den vi bruker her (<code>tidyverse</code>/<code>ggplot2</code>).</em></p>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="setup" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Setup</h1>
<p>In this tutorial you will again work with the practice <code>ess</code> dataset that is included in the <code>bst290</code> package. To make everything available, go ahead and load the package and the dataset. In addition, you have to load the <code>ggplot2</code> package to be able to use it. Since <code>ggplot2</code> is included in the <code>tidyverse</code> collection, we just load the entire <code>tidyverse</code> (this will also be handy later on, when we use the <code>select()</code> and <code>filter()</code> functions and the <code>%&gt;%</code> operator you learned about in the previous tutorial).</p>
<p>The start of your scriptfile should therefore look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Loads packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bst290) </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Loads dataset</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(ess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualizing-data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Visualizing data</h1>
<p>This tutorial will cover the following types of basic graphs:</p>
<ul>
<li>Scatterplots</li>
<li>Boxplots (“box-whisker plots”)</li>
<li>Histograms</li>
<li>Bar graphs</li>
</ul>
<div style="page-break-after: always;"></div>
<section id="scatterplots" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="scatterplots"><span class="header-section-number">3.1</span> Scatterplots</h2>
<p>Scatterplots show the relationship between two <em>numeric</em> or <em>continuous</em> variables, and they are widely used in both academic research but also the “real world” (maybe you have seen Hans Rosling’s famous “200 countries, 400 years, 4 minutes” presentation that featured a scatterplot?).<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> Therefore, knowing how to make a scatterplot is obviously handy!</p>
<p>Scatterplots are also a great way to show you the basic logic of <code>ggplot2</code>. For our scatterplot, you use two numeric variables from the small <code>ess</code> practice-dataset:</p>
<ol type="1">
<li><code>height</code>: The respondent’s height in cm;</li>
<li><code>weight</code>: The respondent’s weight in kg;</li>
</ol>
<p>Feel free to familiarize yourself with these variables first, using the tools you learned in the previous tutorials such as <code>summary()</code>.</p>
<div style="page-break-after: always;"></div>
<p>Once you you know what you are working with, take a look at the scatterplot below and the code that generated it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight)) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/scatter1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="tutorial_4_files/figure-html/scatter1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight)) <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s go over the code and graph step-by-step so you understand what is going on here:</p>
<ul>
<li>The first function is the <code>ggplot()</code> function — the <code>ggplot()</code> function is the main function in <code>ggplot2</code>. You use it to tell <code>R</code> that you want to make a graph with <code>ggplot2</code>, and it includes the main information needed for the graph:
<ul>
<li>Which dataset you want to use; in this case, you use <code>data = ess</code> to say that you want to want to use the <code>ess</code> dataset;</li>
<li>You define the main ‘aesthetics’ (<code>aes()</code>) of your graph — which variable goes on the horizontal x-axis (<code>height</code>) and which goes on the vertical y-axis (<code>weight</code>).</li>
</ul></li>
<li>Then notice the <code>+</code> symbol at the end of the second line; this tells <code>R</code> that you want to add a layer to the graph;</li>
<li>This layer is defined with <code>geom_point()</code> — you say that you want to graph the individual data points, which together form a scatterplot.</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/scatter1-explot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="tutorial_4_files/figure-html/scatter1-explot-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>If this was a bit much, it might help to see what happens when you construct the graph one step at a time, which comes on the next page. </p>
<section id="the-graph-window" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="the-graph-window"><span class="header-section-number">3.1.1</span> The graph window</h3>
<p>Consider what happens when you only run the <code>ggplot()</code> function without anything else added:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/gg1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="tutorial_4_files/figure-html/gg1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>All that happens is that you get an empty graph window with nothing in it — which is obvious because you have not told <code>R</code> what exactly you want to put into your graph.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="defining-the-dataset" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="defining-the-dataset"><span class="header-section-number">3.1.2</span> Defining the dataset</h3>
<p>Next, you add information about which dataset you want to use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/gg2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="tutorial_4_files/figure-html/gg2-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>No real improvement — but, then again, what is <code>R</code> supposed to do if all it knows is which dataset it should work with, but not the variables and where in the graph they go?</p>
<div style="page-break-after: always;"></div>
</section>
<section id="defining-the-variables-and-their-roles-aesthetics" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="defining-the-variables-and-their-roles-aesthetics"><span class="header-section-number">3.1.3</span> Defining the variables and their roles (‘aesthetics’)</h3>
<p>Now you add information about the main dimensions or ‘aesthetics’ of the graph. In this case, the relevant bits of information are which variables you want to graph and what roles they play in your graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/gg3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="tutorial_4_files/figure-html/gg3-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>In this case, you tell <code>R</code> that you want to use the <code>height</code> and <code>weight</code> variables, and that they are supposed to form the horizontal x-axis (<code>height</code>) and the vertical y-axis (<code>weight</code>). You see the effect in the form of labels on the axes, and a grid system inside the graph.</p>
<p>But still: No contents! Where are the data points the graph is supposed to show?</p>
<div style="page-break-after: always;"></div>
</section>
<section id="defining-the-contents-geometric-objects" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="defining-the-contents-geometric-objects"><span class="header-section-number">3.1.4</span> Defining the contents (‘geometric objects’)</h3>
<p>In <code>ggplot2</code>, you add the actual contents of your graph — the points in a scatterplot, the lines in a line graph, or the bars in a bar graph — as additional layers of ‘geometric objects’ or ‘geoms’ (which makes sense: points, lines, and bars are geometric objects).</p>
<p>In the current case, you add a layer of points with <code>geom_point()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight)) <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/gg4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="tutorial_4_files/figure-html/gg4-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>And there it is: A rough but complete scatterplot.</p>
<p><strong>Important</strong>: Notice again the plus-symbol (<code>+</code>) at the end of the line before <code>geom_point()</code>. You always use this symbol in <code>ggplot2</code> to add additional graph layers.</p>
<p>You will see that functionality clearer when we add more layers like nice labels, which comes now.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="informative-labels" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="informative-labels"><span class="header-section-number">3.1.5</span> Informative labels</h3>
<p>The scatterplot you have now is acceptable if you would only like to visualize the data for yourself, as a part of getting to know your data. But the graph is not in a shape in which you could include it in a course paper, thesis, or report — it is not a “<em>publication quality</em>” graph.</p>
<p>One thing that is missing are informative labels for the two axes. You can add these as additional layers to your graph with <code>labs()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight)) <span class="sc">+</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Body height (cm)"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">"Body weight (kg)"</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning: Removed 5 rows containing missing values or values outside the scale range</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="do">## (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/gg5-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="tutorial_4_files/figure-html/gg5-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p><em>Notice</em> that the text that forms the axis labels is put within quotation marks. This is important: Text always goes within quotation marks!</p>
<p>If you want, you can also add other labels such as a title, a subtitle, or a note (“caption”). See <code>?ggplot2::labs()</code> for details.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="changing-the-overall-look-of-the-graph-theme" class="level3" data-number="3.1.6">
<h3 data-number="3.1.6" class="anchored" data-anchor-id="changing-the-overall-look-of-the-graph-theme"><span class="header-section-number">3.1.6</span> Changing the overall look of the graph (‘theme’)</h3>
<p>Almost there — but the gray background makes the graph look a bit dull.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>In <code>ggplot2</code>, you can overwrite the default theme by adding a theme layer. For example, to use a simple black and white theme, you would add <code>theme_bw()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight)) <span class="sc">+</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Body height (cm)"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">"Body weight (kg)"</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/gg6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="tutorial_4_files/figure-html/gg6-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>And this is now a graph that you could include in a course paper, etc. Of course, there are many, many more ways to tweak this graph even further, but what you have is fine for now.</p>
<p>If you want to see what other themes you can choose from, visit <a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="uri">https://ggplot2.tidyverse.org/reference/ggtheme.html</a></p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="bivariate-boxplots" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="bivariate-boxplots"><span class="header-section-number">3.2</span> Bivariate boxplots</h2>
<p>A scatterplot like the one you just created is a great way to visualize the relationship between two numeric (or metric) variables. But there may be situations <strong>where only one of your variables is numeric and the other is categorical or ordinal</strong>. In that case, a scatterplot will not be helpful.</p>
<p>But you can visualize the relationship between a categorical and a numeric variable with a <em>boxplot</em> (or <em>“box-whisker plot”</em>). You should remember that a boxplot is a type of graph that allows you to visualize the distribution of a numeric variable (see Kellstedt &amp; Whitten 2018, 135). A boxplot shows you the median (or “middle value”) but also the 1st and 3rd quartile and any outliers in the data.</p>
<p>By drawing boxplots of a numeric variable (such as age) over the groups of a categorical variable (such as gender), you can visualize any relationships between these variables.</p>
<div style="page-break-after: always;"></div>
<p>For example, let’s assume you are interested in the relationship between gender (a categorical variable) and body height (a numeric variable): Are men typically taller than women?</p>
<p>The code below shows how you can visualize this relationship using a boxplot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gndr, <span class="at">y =</span> height)) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/box-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="tutorial_4_files/figure-html/box-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>This piece of code should now not be difficult to understand:</p>
<ol type="1">
<li>As before, you need to specify a variable for the x- and one for the y-axis (just like in the scatterplot above). Here, you put <code>gndr</code> on the x-axis and <code>height</code> on the y-axis;</li>
<li>Then just you let <code>R</code> draw the boxplots with <code>geom_boxplot()</code>;</li>
</ol>
<div style="page-break-after: always;"></div>
<p>With some more polishing, you get a neat and informative graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gndr, <span class="at">y =</span> height)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Gender"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Body height (cm)"</span>) <span class="sc">+</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/box2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="tutorial_4_files/figure-html/box2-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>What do you learn from the graph about the differences in body height between men and women (see Kellstedt &amp; Whitten 2018, 135 for how to read a boxplot)?</p>
<div style="page-break-after: always;"></div>
</section>
<section id="univariate-graphs-histograms" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="univariate-graphs-histograms"><span class="header-section-number">3.3</span> Univariate graphs: Histograms</h2>
<p>The graphs you created so far were types of <em>bivariate</em> graphs: They show the relationship between two different variables.</p>
<p>You can of course also create graphs that describe single variables: <em>univariate</em> graphs such as histograms or bar graphs.</p>
<div style="page-break-after: always;"></div>
<section id="drawing-a-histogram" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="drawing-a-histogram"><span class="header-section-number">3.3.1</span> Drawing a histogram</h3>
<p>A <em>histogram</em> is a type of graph that is very useful to visualize the distribution of a single continuous or metric variable.</p>
<p>Since you have seen earlier how a <code>ggplot</code>-graph is built, you should now be able to look at the code below and understand how you can produce a histogram:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> weight)) <span class="sc">+</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/hist1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="tutorial_4_files/figure-html/hist1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Much of the code is still the same (<code>data = ess</code>) as above, but there are some differences:</p>
<ol type="1">
<li>Only one aesthetic (<code>aes()</code>) is defined: <code>x = weight</code>. This is because the graph is <em>uni</em>variate, it shows only the distribution of a <em>single</em> variable;</li>
<li>The geometric object is now a histogram (<code>geom_histogram()</code>);</li>
</ol>
<div style="page-break-after: always;"></div>
</section>
<section id="improving-appearance" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="improving-appearance"><span class="header-section-number">3.3.2</span> Improving appearance</h3>
<p>The graph on the previous page is quite dull and, more importantly, the individual “bins” are difficult to distinguish from each other. This is easy to fix, however.</p>
<p>All we need to do is to change the color of the bins’ outlines with the <code>color</code> argument (“option”). White is a good option here since it contrasts with the dark gray bins but does not add extra complexity to the graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> weight)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/hist2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="tutorial_4_files/figure-html/hist2-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="changing-the-number-of-bins" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="changing-the-number-of-bins"><span class="header-section-number">3.3.3</span> Changing the number of “bins”</h3>
<p>As you know from Kellstedt &amp; Whitten (2018, 138–39), the number of “blocks” or “bins” into which we group the data is an important choice that can really affect our impression of the variable we look at.</p>
<p>By default, <code>geom_histogram()</code> uses 30 bins, but this might obviously not be ideal in all situations. Fortunately, you can change the number of bins easily with the <code>bins</code> option.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>For example, we could set the number of bins to 20 instead of 30:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> weight)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">bins =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/hist3-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="tutorial_4_files/figure-html/hist3-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Feel free to play around with different numbers and see how the graph changes!</p>
<div style="page-break-after: always;"></div>
</section>
<section id="final-polishing" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="final-polishing"><span class="header-section-number">3.3.4</span> Final polishing</h3>
<p>Finally, the histogram can also still be improved by changing the background theme and by adding axis labels:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> weight)) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"white"</span>, <span class="at">bins =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Body height (cm)"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">"Number of observations"</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/hist4-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="tutorial_4_files/figure-html/hist4-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Can you see what was changed?</p>
<ol type="1">
<li>The graph now has informative labels and a simple black and white theme;</li>
<li>The number of bins is changed back to 30.</li>
</ol>
<p>As before, there are many more ways to make this graph prettier, but this is good enough for now.</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="univariate-graphs-bar-graphs" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="univariate-graphs-bar-graphs"><span class="header-section-number">3.4</span> Univariate graphs: Bar graphs</h2>
<p>Next to histograms, bar graphs are another type of univariate graph to show the distribution of a single variable. Bar graphs are suited for categorical or ordinal variables — variables with a few distinct categories.</p>
<p>The code below produces a bar graph of the gender variable (<code>gndr</code>) — and it shows the number of men and women in the dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gndr)) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/bar1-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="tutorial_4_files/figure-html/bar1-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>You should be able to understand most of the code by now, but the <code>geom_bar()</code> part might require a bit of explanation.</p>
<ol type="1">
<li>Obviously, to produce a bar graph, you would use the <code>geom_bar()</code> layer;</li>
<li><em>By default</em>, <code>geom_bar()</code> shows the number of observations (‘counts’) in each of the two groups. One could also be more explicit and specify <code>geom_bar(stat = "count")</code> to tell <code>R</code> very clearly that it is supposed to show the number of observations (‘counts’) in each category of the gender variable. To see what else you can do with <code>geom_bar()</code>, use the help file (<code>?geom_bar</code>).</li>
</ol>
<div style="page-break-after: always;"></div>
<p>And, once more, there are ways to make this graph ready for publication:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ess,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> gndr)) <span class="sc">+</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"count"</span>) <span class="sc">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Gender"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="st">"Number of observations"</span>) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/bar2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="tutorial_4_files/figure-html/bar2-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="linking-data-management-and-visualization" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Linking data management and visualization</h1>
<p>The previous tutorial on <em>Data cleaning &amp; management</em> showed how you can use the pipe operator (<code>%&gt;%</code>) to link different data management steps together, and it also mentioned that you can directly visualize the result of such a “data cleaning pipeline” with <code>ggplot2</code>.</p>
<p>Now that you know both how to clean data and how to visualize them, you have what you need to be able to understand how both parts can be linked together. This is important to know because it gives you <em>a lot of flexibility</em>: Whatever summary statistics you want to show, you can calculate them and then directly put them into a neat-looking graph.</p>
<p>To illustrate this, let’s go back to the issue of gender and body height. The boxplots above showed you that men are typically taller than women (surprise, surprise…) with a number of summary statistics (the median, the 1st and 3rd quartiles, etc). What a boxplot does not show you, however, is <em>averages</em>.</p>
<p>This might be a problem if, for some reason, you are <em>specifically</em> interested in whether men are <em>on average</em> taller than women.</p>
<p>To solve this problem, you can do the following:</p>
<ol type="1">
<li>You calculate the average body heights of men and women using the tools you learned in the previous tutorial;</li>
<li>Then you take the result of the previous step and directly “feed” it into a <code>ggplot</code> graph using the pipe operator (<code>%&gt;%</code>); </li>
</ol>
<section id="calculating-summary-statistics" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="calculating-summary-statistics"><span class="header-section-number">4.1</span> Calculating summary statistics</h2>
<p>You may remember that you can use <code>group_by()</code> and <code>summarize()</code> to get summary statistics such as the average over groups of a categorical variable, but just to refresh your memory here is how you calculate the average body height for men and women in the <code>ess</code> dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>ess <span class="sc">%&gt;%</span> <span class="co"># 1.</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gndr) <span class="sc">%&gt;%</span> <span class="co"># 2.</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="co"># 3.</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 2 × 2</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   gndr   avg_height</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;fct&gt;       &lt;dbl&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 Male         179.</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Female       168.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To put this into human language, you tell <code>R</code> to:</p>
<ol type="1">
<li>“Take the <code>ess</code> dataset,…”</li>
<li>“…group the data by gender (<code>gndr</code>),…”</li>
<li>“…calculate the average body height for each gender, and store the result as a new variable (called <code>avg_height</code>).”</li>
</ol>
<p>If you look carefully at the output, you can see that the result of the calculation is a so-called <code>tibble</code>. A <code>tibble</code> is a type of <code>data.frame</code>-object in <code>R</code> — i.e., a dataset.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> This means that the result you are looking at is, basically, a mini dataset that includes two observations (<code>Male</code> and <code>Female</code>) and two variables (<code>gndr</code> and <code>avg_height</code>). <code>avg_height</code> is here the average body height for men and women as identified by <code>gndr</code>. <em>Important</em>: Because the result is essentially a dataset, you can directly visualize it with <code>ggplot</code>!</p>
<div style="page-break-after: always;"></div>
</section>
<section id="visualizing-the-result" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="visualizing-the-result"><span class="header-section-number">4.2</span> Visualizing the result</h2>
<p>Now that you have the numbers you want to show in your graph, all you need to do is to use the <code>%&gt;%</code> operator to directly feed the numbers – the ‘mini dataset’ – into a graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>ess <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gndr) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="co"># here is the link!</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gndr, <span class="at">y =</span> avg_height)) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="tutorial_4_files/figure-html/pipegraph2-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="tutorial_4_files/figure-html/pipegraph2-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>You see that the first part is just the code for the calculation from above: <code>group_by()</code>, then <code>summarize()</code>. We then add another pipe at the end to feed the result directly into a <code>ggplot</code> graph. In this graph, <code>gndr</code> is on the x-axis and the y-axis shows the average height for each gender. You then visualize the height per gender with a simple bar graph using <code>geom_bar()</code>.</p>
<p><strong>One thing is worth noticing:</strong> In this case, we need to tell <code>R</code> that <code>geom_bar()</code> should only show the pure numbers that we got from the previous step (the content of the new <code>avg_height</code> variable in the mini dataset), and not the number of observations or other statistics. We do this by specifying <code>stat = "identity"</code> within <code>geom_bar()</code>.</p>
<p>Linking data cleaning and visualization can be very handy when want to visualize specific summary statistics (the average, the standard deviation,…), but especially when you want to create some more complicated graphs such as grouped bar graphs showing percentages.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
</section>
</section>
<section id="exporting-graphs-with-ggsave" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Exporting graphs with <code>ggsave()</code></h1>
<p>When you make graphs in <code>R</code>, you usually don’t do that because it is so much fun (not yet at least…) but because you want to present these graphs somewhere — in a course paper, thesis, report, presentation, etc. And to be able to include whatever graph you have created, you need to export it from <code>R</code> to an image file (e.g., PDF, JPEG, or PNG) that you can open in Word, PowerPoint, or any other software you use.</p>
<p>Exporting <code>ggplot</code> graphs is easy with the <code>ggsave()</code> function. This function simply exports the last graph you created and saves it under a name and in a file format that you decide. In practice, you create your graph with <code>ggplot()</code> and all the other functions and, once you are happy with the result, you run <code>ggsave()</code>.</p>
<p>For example, let’s say you wanted to export the last bar graph from earlier, which was created with this code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>ess <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gndr) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gndr, <span class="at">y =</span> avg_height)) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Since the graph shows the average height of your survey respondents divided by gender, you want to call it <em>“genderheight”</em>, and you want to save it as a PDF file. That means, the file you want to get will be called <em>“genderheight.pdf”</em>.</p>
<p>To do that, you would simply add a <code>ggsave()</code> command in which you specify the file name in quotation marks after the code to create the graph itself:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates the graph</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>ess <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(gndr) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gndr, <span class="at">y =</span> avg_height)) <span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># This exports it</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">"genderheight.pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>ggsave()</code> can automatically figure out which file format you want to use from the ending you provide. In this case, you used <em>.pdf</em>, so <code>ggsave()</code> saves the file as a PDF file. You could also have specified <em>.png</em> to get a PNG image file.</p>
<p>To see which file formats you can export to and how you can further customize the file, see the official documentation: <a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="uri">https://ggplot2.tidyverse.org/reference/ggsave.html</a></p>
<div style="page-break-after: always;"></div>
</section>
<section id="conclusion" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Conclusion</h1>
<p>Congrats, you now know the basics of data visualization with <code>ggplot2</code>! You can now directly practice your new skills by doing the de-bugging exercises (<em>Tutorials</em>, then “Data visualization”).</p>
<!-- # Exercises -->
<!-- It's time to solidify that knowledge with some exercises --- and you move again from the small `ess` practice dataset to the full ESS. -->
<!-- ## Exercise 1 -->
<!-- Everything starts with importing and cleaning data, just as you learned in the previous tutorial: -->
<!-- 1. Use `haven::read_sav()` to import the full ESS (round 7, 2014) dataset file and store the imported dataset in your *Environment* (e.g., as `ess7`); use `labelled::unlabelled()` to convert the data; -->
<!-- 2. Trim the data: Keep only observations from Norway (`cntry=="NO"`), and select `essround`, `idno`, `cntry`, `gndr`, `eduyrs`, `alcfreq`, and `alcwkdy` as variables; link both operations with the pipe (`%>%`) and save the result as `ess_no`; -->
<!-- 3. If you like, make a data dictionary;  -->
<!-- 4. Use the `attributes()` function, the data dictionary, and/or go to the ESS Data Portal to familiarize yourself with the different variables that are in the "trimmed" dataset; -->
<!-- ## Exercise 2 -->
<!-- Now that you have your dataset, its time for a first graph: create a simple bar graph that shows frequencies. -->
<!-- 1. Can you make a bar graph that shows the number of observations ('counts') that you have for each of the categories of the `alcfreq` variable? -->
<!-- 2. Can you make the graph ready for publication by adding labels and changing the theme? -->
<!-- 3. (Bonus): Remove the `NA`s from the graph using `drop_na()` and the pipe; -->
<!-- ## Exercise 3 -->
<!-- Now you practice linking data cleaning and data visualization with the pipe (`%>%`): -->
<!-- 1. Calculate the *average* of the `alcwkdy` variable by gender (`gndr`) with `group_by()` and `summarize()`; -->
<!-- 2. Visualize the result in a bar graph. -->
<!-- 3. Polish the graph as before. -->
<!-- 4. What do you learn from the graph? How do you interpret the numbers you see? -->
<!-- ## Exercise 4 -->
<!-- In this last exercise, you practice visualizing numerical variables.  -->
<!-- 1. What type of graph would you use to show how the `eduyrs` variable is distributed? -->
<!-- 3. Can you create such a graph and polish it? -->
<!-- 4. How do you interpret the graph you get? What do you learn here? -->


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Others are the basic graphing tools that are built into <code>R</code> or the <code>lattice</code> package.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>See <a href="https://youtu.be/jbkSRLYSojo" class="uri">https://youtu.be/jbkSRLYSojo</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>It is also generally not ideal to have a gray background because it may make it unnecessarily difficult to read finer details in more complex graphs (see Schneider &amp; Jacoby 2018, “Graphical displays for public opinion research”, in Atkinson &amp; Alvarez, <em>The Oxford Handbook of Polling and Survey Methods</em>, pages 439–479. Oxford: Oxford University Press.).<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Alternatively, you can also change how wide the bins are with the <code>binwidth</code> option.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>See <a href="https://tibble.tidyverse.org/" class="uri">https://tibble.tidyverse.org/</a> in case you want to learn more.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>See for example here: <a href="https://sebastiansauer.github.io/percentage_plot_ggplot2_V2/" class="uri">https://sebastiansauer.github.io/percentage_plot_ggplot2_V2/</a>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./tutorial_3.html" class="pagination-link" aria-label="Tutorial 3: Data cleaning &amp; management">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Tutorial 3: Data cleaning &amp; management</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./tutorial_5.html" class="pagination-link" aria-label="Tutorial 5: Confidence intervals">
        <span class="nav-page-text">Tutorial 5: Confidence intervals</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","closeEffect":"zoom","loop":false,"descPosition":"bottom","openEffect":"zoom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>