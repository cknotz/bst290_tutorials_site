<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Tutorial 2: Importing &amp; exploring your data – R Tutorials for BST290</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./tutorial_1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Tutorials for BST290</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./tutorial_2.html">Tutorial 2: Importing &amp; exploring your data</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_0.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 0: Installation &amp; Setup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tutorial 1: Your first steps in <code>R</code></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tutorial_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Tutorial 2: Importing &amp; exploring your data</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a>
  <ul class="collapse">
  <li><a href="#your-project-folder" id="toc-your-project-folder" class="nav-link" data-scroll-target="#your-project-folder">Your project folder</a></li>
  <li><a href="#loading-the-bst290-package-and-the-practice-dataset" id="toc-loading-the-bst290-package-and-the-practice-dataset" class="nav-link" data-scroll-target="#loading-the-bst290-package-and-the-practice-dataset">Loading the <code>bst290</code> package and the practice dataset</a></li>
  </ul></li>
  <li><a href="#exploring-data-in-r" id="toc-exploring-data-in-r" class="nav-link" data-scroll-target="#exploring-data-in-r">Exploring data in <code>R</code></a>
  <ul class="collapse">
  <li><a href="#a-first-glimpse" id="toc-a-first-glimpse" class="nav-link" data-scroll-target="#a-first-glimpse">A first glimpse</a></li>
  <li><a href="#looking-at-the-data" id="toc-looking-at-the-data" class="nav-link" data-scroll-target="#looking-at-the-data">Looking at the data</a></li>
  <li><a href="#printing-out-the-first-and-last-observations-with-head-and-tail" id="toc-printing-out-the-first-and-last-observations-with-head-and-tail" class="nav-link" data-scroll-target="#printing-out-the-first-and-last-observations-with-head-and-tail">Printing out the first and last observations with <code>head()</code> and <code>tail()</code></a>
  <ul class="collapse">
  <li><a href="#default-usage" id="toc-default-usage" class="nav-link" data-scroll-target="#default-usage">Default usage</a></li>
  <li><a href="#looking-at-specific-variables" id="toc-looking-at-specific-variables" class="nav-link" data-scroll-target="#looking-at-specific-variables">Looking at specific variables</a></li>
  <li><a href="#definining-the-number-of-observations-rows" id="toc-definining-the-number-of-observations-rows" class="nav-link" data-scroll-target="#definining-the-number-of-observations-rows">Definining the number of observations (“rows”)</a></li>
  </ul></li>
  <li><a href="#a-quick-summary-of-your-data-with-summary" id="toc-a-quick-summary-of-your-data-with-summary" class="nav-link" data-scroll-target="#a-quick-summary-of-your-data-with-summary">A quick summary of your data with <code>summary()</code></a></li>
  <li><a href="#specific-summary-statistics-for-numeric-variables" id="toc-specific-summary-statistics-for-numeric-variables" class="nav-link" data-scroll-target="#specific-summary-statistics-for-numeric-variables">Specific summary statistics for numeric variables</a>
  <ul class="collapse">
  <li><a href="#when-you-have-missing-observations-nas" id="toc-when-you-have-missing-observations-nas" class="nav-link" data-scroll-target="#when-you-have-missing-observations-nas">When you have missing observations (<code>NA</code>s)</a></li>
  </ul></li>
  <li><a href="#working-with-categorical-or-ordinal-variables" id="toc-working-with-categorical-or-ordinal-variables" class="nav-link" data-scroll-target="#working-with-categorical-or-ordinal-variables">Working with categorical or ordinal variables</a>
  <ul class="collapse">
  <li><a href="#introducing-factors" id="toc-introducing-factors" class="nav-link" data-scroll-target="#introducing-factors">Introducing <em>factors</em></a></li>
  <li><a href="#identifying-factor-variables" id="toc-identifying-factor-variables" class="nav-link" data-scroll-target="#identifying-factor-variables">Identifying factor variables</a></li>
  <li><a href="#getting-familiar-with-factor-variables" id="toc-getting-familiar-with-factor-variables" class="nav-link" data-scroll-target="#getting-familiar-with-factor-variables">Getting familiar with factor variables</a></li>
  <li><a href="#getting-the-structure-of-a-factor-type-variable" id="toc-getting-the-structure-of-a-factor-type-variable" class="nav-link" data-scroll-target="#getting-the-structure-of-a-factor-type-variable">Getting the structure of a factor-type variable</a></li>
  <li><a href="#how-numerical-values-and-text-labels-correspond" id="toc-how-numerical-values-and-text-labels-correspond" class="nav-link" data-scroll-target="#how-numerical-values-and-text-labels-correspond">How numerical values and text labels correspond</a></li>
  <li><a href="#empty-categories-in-factor-type-variables" id="toc-empty-categories-in-factor-type-variables" class="nav-link" data-scroll-target="#empty-categories-in-factor-type-variables">Empty categories in factor-type variables</a></li>
  </ul></li>
  <li><a href="#custom-functions-for-summary-tables" id="toc-custom-functions-for-summary-tables" class="nav-link" data-scroll-target="#custom-functions-for-summary-tables">Custom functions for summary tables</a>
  <ul class="collapse">
  <li><a href="#functions-from-the-bst290-package" id="toc-functions-from-the-bst290-package" class="nav-link" data-scroll-target="#functions-from-the-bst290-package">Functions from the <code>bst290</code> package</a></li>
  <li><a href="#using-oppsumtabell" id="toc-using-oppsumtabell" class="nav-link" data-scroll-target="#using-oppsumtabell">Using <code>oppsumtabell</code></a></li>
  <li><a href="#norwegian-language-support" id="toc-norwegian-language-support" class="nav-link" data-scroll-target="#norwegian-language-support">Norwegian language support</a></li>
  <li><a href="#exporting-the-table-to-word" id="toc-exporting-the-table-to-word" class="nav-link" data-scroll-target="#exporting-the-table-to-word">Exporting the table to Word</a></li>
  <li><a href="#using-oppsum_grupp" id="toc-using-oppsum_grupp" class="nav-link" data-scroll-target="#using-oppsum_grupp">Using <code>oppsum_grupp</code></a></li>
  <li><a href="#further-help" id="toc-further-help" class="nav-link" data-scroll-target="#further-help">Further help</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#importing-a-real-dataset-into-r" id="toc-importing-a-real-dataset-into-r" class="nav-link" data-scroll-target="#importing-a-real-dataset-into-r">Importing a real dataset into <code>R</code></a>
  <ul class="collapse">
  <li><a href="#the-european-social-survey" id="toc-the-european-social-survey" class="nav-link" data-scroll-target="#the-european-social-survey">The <em>European Social Survey</em></a>
  <ul class="collapse">
  <li><a href="#accessing-downloading-ess-data" id="toc-accessing-downloading-ess-data" class="nav-link" data-scroll-target="#accessing-downloading-ess-data">Accessing &amp; downloading <em>ESS</em> data</a></li>
  </ul></li>
  <li><a href="#importing-data-with-haven-and-labelled" id="toc-importing-data-with-haven-and-labelled" class="nav-link" data-scroll-target="#importing-data-with-haven-and-labelled">Importing data with <code>haven</code> and <code>labelled</code></a>
  <ul class="collapse">
  <li><a href="#generating-a-data-dictionary" id="toc-generating-a-data-dictionary" class="nav-link" data-scroll-target="#generating-a-data-dictionary">Generating a data dictionary</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#de-bugging-exercises" id="toc-de-bugging-exercises" class="nav-link" data-scroll-target="#de-bugging-exercises">De-bugging exercises</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Tutorial 2: Importing &amp; exploring your data</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><a href="https://raw.github.com/cknotz/bst290_tutorials/main/tutorial2_gettingtoknow.pdf" class="btn btn-outline-primary" role="button">Download as PDF</a></p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>You have so far learned how to install and set up <code>R</code> and <code>RStudio</code>, how you can install and load packages, how data look like in <code>R</code>, and how you write and use code. All of this was essentially a warm-up.</p>
<p>Now things get a bit more real: This week, you will learn how to open a real research dataset and how to explore it in <code>R</code>.</p>
<p>But we will take this one step at a time: You will first learn about data exploration with a small dataset that is already installed on your computer. Then you will import a real dataset (from the <em>European Social Survey</em>). This is to prepare you for the in-class exercises, where you will apply the data-exploration techniques you learned in the tutorial to the full-scale ESS dataset.</p>
<p><strong>Important:</strong> As before, document your code in a dedicated scriptfile as you work your way through the tutorial – do not rely on the <em>Console</em> (unless you are just installing packages or quickly trying things out).</p>
<hr>
<p><em>Hvis du ønsker å lese en norsk tekst <strong>i tillegg</strong>: “Lær deg R”, Kapittel 4</em></p>
<hr>
<div style="page-break-after: always;"></div>
</section>
<section id="setup" class="level1">
<h1>Setup</h1>
<section id="your-project-folder" class="level2">
<h2 class="anchored" data-anchor-id="your-project-folder">Your project folder</h2>
<p>The first thing you need to do is to make sure that you are working in the <em>Project</em> (and the associated folder) that you created in the first seminar/lab in Week 1 of the course.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Look at the upper-right corner of the <em>RStudio</em> window and check that your project is active. It should <strong>not</strong> say: “Project: (None)”. Instead, you should see the name of the project you created. (If you do see “Project: (None)” written there, you can click on it to open a drop-down menu in which your project should be listed. You can open it there.)</p>
<p>Once you are done with make sure that you know where on your computer your project folder is; navigate there in the Windows File Explorer/Mac Finder.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="loading-the-bst290-package-and-the-practice-dataset" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-bst290-package-and-the-practice-dataset">Loading the <code>bst290</code> package and the practice dataset</h2>
<p>You will remember that you installed a number of <em>packages</em> previously, one of which was the <code>bst290</code> package. This package includes, among other things, a small practice dataset that you will use in this and the other tutorials to get familiar with the various operations in <code>R</code> before you move on to the “real-deal” research datasets.</p>
<p>The practice dataset in the <code>bst290</code> package is a fragment of the <em>European Social Survey</em> data that were collected in Norway in 2014. In essence, this practice dataset is a mini-version of the full ESS dataset. Where the full ESS includes data for more than 1000 survey participants and hundreds of variables, the practice dataset includes only data for 143 Norwegian respondents and 22 variables.</p>
<p>To access the data, you first need to load the <code>bst290</code> package with the <code>library()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(bst290)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then you can open the dataset (which is called <code>ess</code>) with the <code>data()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(ess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If everything worked, then you should now see the <code>ess</code> dataset listed in the <em>Environment</em> panel (upper right of your screen). You will probably see <code>&lt;Promise&gt;</code> written where the dataset summary and the variables should appear — and you can take this literally: <code>R</code> promises you that the dataset will appear once you start using it. So, all you need to do is to call up the dataset in some way, for example by simply typing <code>ess</code> into the <em>Console</em>.</p>
<p>Once the dataset is properly loaded, you should see in the <em>Environment</em> panel that the dataset includes 143 observations and 22 variables.</p>
<p>You can also get the dataset directly with the “double-colon” method:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ess <span class="ot">&lt;-</span> bst290<span class="sc">::</span>ess</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Translated into human language, this tells <code>R</code> to “get the <code>ess</code> dataset from the <code>bst290</code> package and save it under the name <code>ess</code> in the <em>Environment</em>”.</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="exploring-data-in-r" class="level1">
<h1>Exploring data in <code>R</code></h1>
<section id="a-first-glimpse" class="level2">
<h2 class="anchored" data-anchor-id="a-first-glimpse">A first glimpse</h2>
<p>Take a look at the <code>ess</code> object in the <em>Environment</em> tab — can you see the tiny blue circle with the white triangle/arrow inside it that is directly to the left of <code>ess</code>?</p>
<p>If you click on it, you can get more information about the different variables that are included in the dataset.</p>
<ul>
<li>You should now see a list of variable names (<code>name</code>, <code>essround</code>, <code>idno</code>,…). Each of these variables is a collection of data points — and therefore stored as a <em>vector</em> in <code>R</code> (you may remember from the previous tutorial). All these vectors are then combined into the <code>ess</code> dataset (or, in <code>R</code> lingo, <code>data.frame</code>).</li>
<li>Next to these names, you also see <code>chr</code> or <code>num</code> written — as you probably remember, this tells you what type of information each variable contains.</li>
<li>You may also notice that some elements in the list are followed by the phrase <code>Factor w/ XX levels...</code> — these are so called <code>factors</code> and are a particular type of vector. You will learn about them further below.</li>
</ul>
</section>
<section id="looking-at-the-data" class="level2">
<h2 class="anchored" data-anchor-id="looking-at-the-data">Looking at the data</h2>
<p>Let’s first get an idea of how the dataset really looks like, which you can do with the <code>View()</code> function. To do that, run the following in your <em>Console</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(ess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A new tab should now open and you should see the entire dataset. This should look a bit like Microsoft Excel, a large table with lots of neat and orderly but boring rows and columns of data.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="printing-out-the-first-and-last-observations-with-head-and-tail" class="level2">
<h2 class="anchored" data-anchor-id="printing-out-the-first-and-last-observations-with-head-and-tail">Printing out the first and last observations with <code>head()</code> and <code>tail()</code></h2>
<p>Looking at the raw dataset is often quite helpful to get a first idea of what you are working with — but is impractical when you are working with very large datasets.</p>
<p>An alternative way to get a first glimpse of your dataset is to use the <code>head()</code> and <code>tail()</code> functions. These show you the first and last six rows (observations) of your dataset — in essence, they print out the top or bottom of the dataset.</p>
<section id="default-usage" class="level3">
<h3 class="anchored" data-anchor-id="default-usage">Default usage</h3>
<p>Using them is simple, you just need to specify the name of your dataset within the function. For example, to display the <em>first</em> six observations in the <code>ess</code> dataset, you run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ess) <span class="co"># This shows you the first 6 observations</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The result should look like this:</p>
<div class="cell">
<pre><code>##   essround  idno cntry   gndr agea
## 1        7 12414    NO   Male   22
## 2        7  9438    NO Female   43
## 3        7 19782    NO Female   58
## 4        7 18876    NO Female   22
## 5        7 20508    NO   Male   84
## 6        7 19716    NO   Male   62
##                                                                          edlvdno
## 1    Fullført 3-4 årig utdanning fra høgskole (Bachelor-, cand.mag., lærerhøgsko
## 2    Fullført 3-4 årig utdanning fra høgskole (Bachelor-, cand.mag., lærerhøgsko
## 3                    Fullført 5-6 årig utdanning fra høgskole (master, hovedfag)
## 4    Fullført 3-4 årig utdanning fra høgskole (Bachelor-, cand.mag., lærerhøgsko
## 5    Universitet/høgskole, mindre enn 3 år, men minst 2 år (høgskolekandidat, 2-
## 6 Fullført 5-6 årig utdanning fra universitet (master, hovedfag), lengre profesj
##   mainact           mbtru        hinctnta                              tvtot
## 1    &lt;NA&gt;              No H - 10th decile                     No time at all
## 2    &lt;NA&gt;              No H - 10th decile  More than 1 hour, up to 1,5 hours
## 3    &lt;NA&gt;  Yes, currently  K - 7th decile More than 2 hours, up to 2,5 hours
## 4    &lt;NA&gt;              No  J - 1st decile More than 1,5 hours, up to 2 hours
## 5 Retired Yes, previously            &lt;NA&gt;                     No time at all
## 6    &lt;NA&gt;  Yes, currently H - 10th decile  More than 1 hour, up to 1,5 hours
##   ppltrst vote             stflife                    gincdif
## 1       7  Yes Extremely satisfied Neither agree nor disagree
## 2       9  Yes                   8 Neither agree nor disagree
## 3       9  Yes                   7             Agree strongly
## 4       5   No                   7 Neither agree nor disagree
## 5       7  Yes                   9 Neither agree nor disagree
## 6       7  Yes                   8          Disagree strongly
##                      freehms imwbcnt           happy    health ctzcntr brncntr
## 1                      Agree       4               9      Good     Yes     Yes
## 2             Agree strongly       4               9 Very good     Yes     Yes
## 3             Agree strongly       5               8      Good     Yes     Yes
## 4                      Agree       5 Extremely happy Very good     Yes     Yes
## 5 Neither agree nor disagree       5               7 Very good     Yes     Yes
## 6                      Agree       6               8      Fair     Yes     Yes
##   height weight
## 1    175     65
## 2    175     71
## 3    150     58
## 4    173     63
## 5    167     58
## 6    174     58</code></pre>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="looking-at-specific-variables" class="level3">
<h3 class="anchored" data-anchor-id="looking-at-specific-variables">Looking at specific variables</h3>
<p>If the result above seems pretty cluttered and not very informative: Correct. But there is a solution. You can specify that only the first observations of a single variable are shown when you run <code>head()</code> or <code>tail()</code>. This can help when the dataset contains a larger number of variables and the output therefore becomes cluttered – as was the case here.</p>
<p>Take another quick look at the <em>Environment</em> window: You might have noticed that there are dollar symbols (<code>$</code>) before each of the variable names in the <code>ess</code> dataset. This is a hint to how you can select single variables from a dataset: With the dollar symbol.</p>
<p>The general syntax here is: <code>dataset$variable</code>. For example, to select the age-variable <code>agea</code> from the <code>ess</code> dataset, you would type: <code>ess$agea</code></p>
<p>You can use this with the <code>head()</code> function to let <code>R</code> show you the first six observations of only the <code>agea</code>-variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 22 43 58 22 84 62</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Of course, you can do this also with any of the other variables — and this works also with many other functions such as <code>tail()</code>, <code>mean()</code>, or <code>summarize()</code>. More follows!</p>
<div style="page-break-after: always;"></div>
</section>
<section id="definining-the-number-of-observations-rows" class="level3">
<h3 class="anchored" data-anchor-id="definining-the-number-of-observations-rows">Definining the number of observations (“rows”)</h3>
<p>You can also tell <code>R</code> to show you more or fewer observations when you use the <code>head()</code> function. For example, the code below will print out the first 10 observations of the <code>agea</code> variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ess<span class="sc">$</span>agea, <span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can do the same with the <code>tail()</code> function.</p>
<p>(A final note: As is often the case with <code>R</code>, there is more than one way to subset a dataset, and these allow you to select more than one variables at a time, or a specific set of observations. We will cover some of them in the next tutorial; for others see e.g.: https://www.statmethods.net/management/subset.html.)</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="a-quick-summary-of-your-data-with-summary" class="level2">
<h2 class="anchored" data-anchor-id="a-quick-summary-of-your-data-with-summary">A quick summary of your data with <code>summary()</code></h2>
<p>With <code>View()</code>, <code>head()</code>, or <code>tail()</code>, you can look at the “raw” dataset. This can give you a first idea of what you are working with, but the problem is that you always only see a few data points at a time. Ideally, you would instead get a sense of how the entire dataset or single variables as a whole look like.</p>
<p>This is where you would use summary statistics like the mean (“average”), the median, or others (as explained in Kellstedt &amp; Whitten).</p>
<p>You can get some important summary statistics with the <code>summary()</code> function.</p>
<p>This function is again easy to use: You just specify which object you want summarized within the parantheses. In this case, we use the function on the entire <code>ess</code> dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you run this, you should get a list of summary statistics for all the variables in the <code>ess</code> dataset. For variables that contain numbers (‘numeric’ variables, or <code>num</code>), you get the minimum, the 1st quartile (a.k.a., the 25th percentile), the median, the mean (‘average’), the 3rd quartile (or 75th percentile) and the maximum. Where variables have missing observations (<code>NA</code>’s), you get these, too.</p>
<p>For non-numeric variables (like <code>cntry</code>, for example) you get their ‘length’ (how many observations they contain) and their type or ‘Class’.</p>
<p>But, as before, the output is again a bit cluttered (which is also why it is not shown here). It is therefore more useful to get summary statistics for a single variable by using the <code>$</code> symbol. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   16.00   33.50   46.00   47.91   62.00   90.00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, <code>Min.</code> means “Minimum”, <code>1st Qu.</code> means “First Quartile”, <code>Median</code> and <code>Mean</code> are obvious, <code>3rd Qu.</code> means “Third Quartile”, and <code>Max.</code> means “Maximum”. If you read Kellstedt/Whitten (2018, Chapter 6), then you should know how to interpret these different statistics.</p>
<div style="page-break-after: always;"></div>
<!-- ### Getting the number of rows or columns of your dataset -->
<!-- Sometimes it can be useful to get the exact number of rows --- the unique observations --- or columns --- the variables --- your dataset contains. -->
<!-- To get the number of rows, you use the `nrow()` function, for example: -->
<!-- ```{r nrow, eval=T, echo=T, collapse=T} -->
<!-- nrow(ess) -->
<!-- ``` -->
<!-- You see that you have 143 rows in your dataset --- i.e., observations for 143 individual respondents. -->
<!-- \newpage -->
<!-- To get the number of columns (variables), you use the `ncol()` function. Alternatively, you can also use the `length()` function: -->
<!-- ```{r ncol, echo=T, eval=T, collapse=T} -->
<!-- ncol(ess) # Option 1 -->
<!-- length(ess) # Option 2 -->
<!-- ``` -->
<!-- You see that the dataset contains 38 variables. -->
</section>
<section id="specific-summary-statistics-for-numeric-variables" class="level2">
<h2 class="anchored" data-anchor-id="specific-summary-statistics-for-numeric-variables">Specific summary statistics for numeric variables</h2>
<p>While <code>summary()</code> provides you a whole list of summary statistics, you often want a specific measure of central tendency or spread for a given variable.</p>
<p>These are easy to get in <code>R</code>; all you need are four functions, all with quite intuitive names:</p>
<ul>
<li><code>mean()</code> for the mean or “average”;</li>
<li><code>median()</code> for the median or “50th percentile”;</li>
<li><code>var()</code> for the variance;</li>
<li><code>sd()</code> for the standard deviation;</li>
</ul>
<p>Using these functions is straightforward — for example, to get the mean of the age-variable (<code>agea</code>) in the <code>ess</code> dataset, you just run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 47.90909</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Getting the other summary statistics works the same way:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 46</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 18.5658</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 344.6889</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="page-break-after: always;"></div>
<section id="when-you-have-missing-observations-nas" class="level3">
<h3 class="anchored" data-anchor-id="when-you-have-missing-observations-nas">When you have missing observations (<code>NA</code>s)</h3>
<p>It is often the case that your variables contain missing information — indicated in <code>R</code> as <code>NA</code>. This happens for example when surveys include sensitive questions about people’s incomes or their sexual orientation, which many respondents refuse to disclose The result is then an <code>NA</code> (“not available”) for that particular respondent and variable.</p>
<p><strong>Important</strong>: The <code>mean()</code>, <code>median()</code>, <code>sd()</code>, and <code>var()</code> functions (and many others) will not give you a proper result <em>if there is even a single <code>NA</code> in your variable!</em></p>
<p>Fortunately, there is an easy solution: All four functions have an option to remove <code>NA</code>s from the data before calculating the respective summary statistic; this option is called <code>na.rm</code> (“<code>NA</code> remove”). You just have to set this option to <code>TRUE</code> (switch it on) to take care of missings, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ess<span class="sc">$</span>agea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 47.90909</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>(Make sure you always add a comma between different parts or “<code>arguments</code>” of a function!)</p>
<!-- **Also important:** Calculating the mean, median, variance, or standard deviation obviously only makes sense for *single* numeric variables. Calculating the mean of an entire dataset or of a non-numeric variable will not work! -->
<!-- If you want to try anyways, run: -->
<!-- * `median(ess)` (what is the median of an entire dataset?) -->
<!-- * `mean(ess$cntry)` (what is the mean of "NO"?) -->
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="working-with-categorical-or-ordinal-variables" class="level2">
<h2 class="anchored" data-anchor-id="working-with-categorical-or-ordinal-variables">Working with categorical or ordinal variables</h2>
<section id="introducing-factors" class="level3">
<h3 class="anchored" data-anchor-id="introducing-factors">Introducing <em>factors</em></h3>
<p>The variable you have been working with so far, <code>agea</code>, is a typical numeric variable: It measures a respondent’s age in years, and age is by nature a number. In this case, calculating statistics such as the mean makes sense.</p>
<p>But there are also other variables such as categorical or ordinal variables, where things are a bit different. Consider for example the variable that records the respondent’s gender, <code>gndr</code>. Obviously, gender is by nature a categorical variable: It has two or more distinct categories (e.g., male, female, diverse), and these categories are <em>unordered</em>, meaning ‘male’ is obviously not a ‘higher’ or ‘better’ category than ‘female’ or ‘diverse’. They are all simply different categories people can fall (or be put) into.</p>
<p>Other times, you may be dealing with <em>ordinal</em> variables (e.g., a Likert-scale: “disagree completely”, “disagree”,“neither”, “agree”, “agree completely”). In these cases, there is an order — but you cannot give a precise number for how much higher “agree completely” is compared to “agree”. One is <em>more</em> than the other, but the difference between them is not clearly defined with a number.</p>
<p>In <code>R</code>, categorical or ordinal variables are usually stored as <em>factors</em>. <em>Factors</em> are a separate kind of variable or “vector” (next to numeric or <code>num</code> and character or <code>chr</code> variables). You can think of <em>factors</em> as “numbers with labels”.</p>
<p>For example, take another look at the <em>Environment</em> tab (upper right of your screen) and look for the <code>gndr</code> variable. You can see directly that it is designated as a “<em>Factor</em>” with 2 levels — but also that there is a row of numbers (<code>1,2,2,...</code>) behind the two levels “Male” and “Female”.</p>
<p>This means:</p>
<ul>
<li>Every male respondent gets the number <code>1</code>; that number then gets the label “Male” attached to it;</li>
<li>Every female respondent gets the number <code>2</code>; that number is then labeled “Female”;</li>
</ul>
<p>The same applies also to the (many) other factor variables in the <code>ess</code> dataset, or other datasets. Again: <em>Factors</em> are essentially just numbers with text labels.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="identifying-factor-variables" class="level3">
<h3 class="anchored" data-anchor-id="identifying-factor-variables">Identifying factor variables</h3>
<p>First, you should be able to <em>identify</em> that a given variable is indeed a <em>factor</em> variable. You can of course see this in the <em>Environment</em>, but this works only for a small dataset like the one you are using now. If you would work with the full ESS data, there would be many more variables and not all of them would be shown in the <em>Environment</em>.</p>
<p>You can use the <code>class()</code> function to let <code>R</code> tell you which type or <em>class</em> a specific variable is saved as. You use this like the other functions above (<code>dataset$variable</code>).</p>
<p>Let’s check if the gender-variable (<code>gndr</code>) is really saved as a factor, as it should be:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ess<span class="sc">$</span>gndr)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "factor"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now compare this to the age variable (<code>agea</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(ess<span class="sc">$</span>agea)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "numeric"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is by nature a numeric variable, and it turns out that <code>R</code> has stored it properly.</p>
<hr>
<p><strong>Important:</strong> You cannot rely on that this always works! It is often the case that one or more variables in your dataset are <em>not</em> stored properly, which then usually causes warnings and errors. In this case, you first need to identify the issue — and you now know how to do that — and then you need to fix it. You will learn how to do this in the next tutorial.</p>
<hr>
<div style="page-break-after: always;"></div>
</section>
<section id="getting-familiar-with-factor-variables" class="level3">
<h3 class="anchored" data-anchor-id="getting-familiar-with-factor-variables">Getting familiar with factor variables</h3>
<p>Once you have identified a factor variable, you will usually want to learn more about it. But getting familiar with <em>factors</em> can be a bit tricky at first. Many summary statistics will not work here. For example, if you try to calculate the mean of a factor variable, <code>R</code> will refuse to do so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(ess<span class="sc">$</span>gndr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Warning in mean.default(ess$gndr): argument is not numeric or logical:</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="do">## returning NA</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This does make sense: Many summary statistics are only appropriate if you are dealing with proper numbers, but here you have only categories. But this also means that you have to use different ways to learn how a factor variable in your dataset looks like.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="getting-the-structure-of-a-factor-type-variable" class="level3">
<h3 class="anchored" data-anchor-id="getting-the-structure-of-a-factor-type-variable">Getting the structure of a factor-type variable</h3>
<p>A first option is to let <code>R</code> print out the structure of the variable using <code>str()</code> (“structure”):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ess<span class="sc">$</span>gndr)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  Factor w/ 2 levels "Male","Female": 1 2 2 2 1 1 1 1 1 1 ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This tells you that <code>gndr</code> has two categories (“Male” &amp; “Female”) and that these are encoded with the numbers <code>1</code> and <code>2</code> in the dataset.</p>
<p>What is not fully clear from this output, however, is which number really corresponds to which label — are men now coded as <code>1</code> or as <code>2</code>? And this is also generally one of the things that can make working with factors daunting: it is a bit difficult to see ‘under the hood’ of a factor: how its text labels correspond to the numerical values underneath.</p>
<p>But you do have a tool to figure this out!</p>
<div style="page-break-after: always;"></div>
</section>
<section id="how-numerical-values-and-text-labels-correspond" class="level3">
<h3 class="anchored" data-anchor-id="how-numerical-values-and-text-labels-correspond">How numerical values and text labels correspond</h3>
<p>The <code>visfactor()</code> function in the <code>bst290</code> package allows you to see which number corresponds with which label in a given factor-type variable.</p>
<p>For example, to see the labels and numerical values of the <code>gndr</code> variable, you would run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">visfactor</span>(<span class="at">variable =</span> <span class="st">"gndr"</span>, <span class="at">dataset =</span> ess)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  values labels</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="do">##       1   Male</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="do">##       2 Female</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="empty-categories-in-factor-type-variables" class="level3">
<h3 class="anchored" data-anchor-id="empty-categories-in-factor-type-variables">Empty categories in factor-type variables</h3>
<p>Another important thing to figure out is whether a particular factor variable in your dataset has empty categories. For example, you might be working with data from a survey in which respondents were asked whether they are working, in education, or unemployed — and it just so happened that none of the respondents were unemployed at the time. In this case, “unemployed” would be an empty category in the data.</p>
<p>The easiest way to see if there are empty categories in a factor variable is to let <code>R</code> show you how many observations you have for each of the categories of the variable. To do so, you use the <code>table()</code> function.</p>
<p>This is how you would do this with the <code>gndr</code> variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ess<span class="sc">$</span>gndr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="do">##   Male Female </span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="do">##     75     68</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You see that there are 75 men and 68 women in the dataset — and there are no empty categories.</p>
<p>But now compare this to the case of the <code>mainact</code> variable, which tells you about the respondent’s main activity of the last seven days (whether they were working, unemployed, etc.):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(ess<span class="sc">$</span>mainact)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="do">##                                 Paid work </span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="do">##                                        15 </span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="do">##                                 Education </span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         7 </span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="do">##               Unemployed, looking for job </span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         0 </span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="do">##           Unemployed, not looking for job </span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         0 </span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a><span class="do">##              Permanently sick or disabled </span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         1 </span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="do">##                                   Retired </span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         7 </span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="do">##             Community or military service </span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         0 </span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Housework, looking after children, others </span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         3 </span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="do">##                                     Other </span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="do">##                                         0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It turns out that there are indeed some empty categories: There are no unemployed respondents in the dataset, and none of them was doing military or community services.</p>
<div style="page-break-after: always;"></div>
<p>An alternative way to identify empty categories is to let <code>R</code> first print out which categories a factor variable can <em>theoretically</em> have and then compare that to what categories are <em>actually represented</em> in the dataset.</p>
<p>To see which categories your factor-variable can <em>theoretically</em> have, you use the <code>levels()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(ess<span class="sc">$</span>mainact)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "Paid work"                                </span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] "Education"                                </span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] "Unemployed, looking for job"              </span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] "Unemployed, not looking for job"          </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] "Permanently sick or disabled"             </span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] "Retired"                                  </span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [7] "Community or military service"            </span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [8] "Housework, looking after children, others"</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [9] "Other"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You see that the <code>mainact</code> variable has, in theory, nine categories in total, ranging from “Paid work” to “Other”.</p>
<p>Now, to see which of these categories are really present in the data, you can use the <code>unique()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(ess<span class="sc">$</span>mainact)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] &lt;NA&gt;                                     </span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] Retired                                  </span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] Paid work                                </span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] Education                                </span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] Housework, looking after children, others</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] Permanently sick or disabled             </span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 9 Levels: Paid work Education ... Other</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You see that only five (plus the <code>NA</code>s) of the nine categories are listed — and being unemployed is not one of them.</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="custom-functions-for-summary-tables" class="level2">
<h2 class="anchored" data-anchor-id="custom-functions-for-summary-tables">Custom functions for summary tables</h2>
<p>Since it is a statistical programming language, <code>R</code> can be used to generate pretty much any type of summary table for any kind of situation you could think of. In addition, there are special packages for more advanced tables, for instance:</p>
<ul>
<li><code>gtsummary</code> (https://www.danieldsjoberg.com/gtsummary/index.html)</li>
<li><code>xtable</code> (https://cran.r-project.org/web/packages/xtable/vignettes/xtableGallery.pdf)</li>
</ul>
<p><strong>But:</strong> Learning how to use <code>R</code> functions to create tables takes a while, and using them can be tedious and prone to errors.</p>
<section id="functions-from-the-bst290-package" class="level3">
<h3 class="anchored" data-anchor-id="functions-from-the-bst290-package">Functions from the <code>bst290</code> package</h3>
<p>To make your life easier while you take this course, you can use special functions from the <code>bst290</code> package to easily generate the most important descriptive tables you will need:</p>
<ul>
<li><code>oppsumtabell</code>: To generate univariate summary tables; this is helpful for numeric variables.</li>
<li><code>oppsum_grupp</code>: To get a table with summary statistics for one variable, over categories of another variable; this is helpful when you have a a numeric and a categorical variable.</li>
</ul>
<!-- (In addition, the `bst290` package also includes the `krysstabell` function, which produces a two-variable cross table showing column percentages. You will learn about this in the later tutorial on tabular analysis and the chi-squared test.) -->
<div style="page-break-after: always;"></div>
</section>
<section id="using-oppsumtabell" class="level3">
<h3 class="anchored" data-anchor-id="using-oppsumtabell">Using <code>oppsumtabell</code></h3>
<p><code>oppsumtabell</code> produces a table with the most important summary statistics of one or more <em>numeric</em> variables.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> All you need to do is specify the dataset that contains your variable(s) and the specific variables you want summary statistics for.</p>
<p>For example, to get summary statistics for the <code>agea</code> variable you just run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oppsumtabell</span>(<span class="at">dataset =</span> ess, <span class="at">variables =</span> <span class="st">"agea"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Variable        agea  
 Observations    143.00
 Average          47.91
 25th percentile  33.50
 Median           46.00
 75th percentile  62.00
 Stand. Dev.      18.57
 Minimum          16.00
 Maximum          90.00
 Missing           0.00</code></pre>
</div>
</div>
<p>To do the same for more than one variable, you run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oppsumtabell</span>(<span class="at">dataset =</span> ess, <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"agea"</span>,<span class="st">"height"</span>,<span class="st">"weight"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Variable        agea   height weight
 Observations    143.00 142.00 138.00
 Average          47.91 173.76  78.63
 25th percentile  33.50 167.25  65.00
 Median           46.00 174.00  75.00
 75th percentile  62.00 180.00  88.75
 Stand. Dev.      18.57   8.78  19.20
 Minimum          16.00 147.00  50.00
 Maximum          90.00 196.00 182.00
 Missing           0.00   1.00   5.00</code></pre>
</div>
</div>
<p>This table shows summary statistics for age (<code>agea</code>) and the respondent’s body height and weight.</p>
<p>Can you interpret each of the statistics shown (again, see Kellstedt/Whitten 2018, Chapter 6).</p>
<div style="page-break-after: always;"></div>
</section>
<section id="norwegian-language-support" class="level3">
<h3 class="anchored" data-anchor-id="norwegian-language-support">Norwegian language support</h3>
<p>You can choose to have the table labelled in Norwegian (NB), if you want. All you have to do is to activate the <code>norsk</code>-option of the <code>oppsumtabell()</code> function and set it to <code>TRUE</code> (or <code>T</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oppsumtabell</span>(<span class="at">dataset =</span> ess, </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"agea"</span>,<span class="st">"height"</span>,<span class="st">"weight"</span>),</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">norsk =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Variabel      agea   height weight
 Observasjoner 143.00 142.00 138.00
 Gjennomsnitt   47.91 173.76  78.63
 25. persentil  33.50 167.25  65.00
 Median         46.00 174.00  75.00
 75. persentil  62.00 180.00  88.75
 Standardavvik  18.57   8.78  19.20
 Minimum        16.00 147.00  50.00
 Maksimum       90.00 196.00 182.00
 Manglende       0.00   1.00   5.00</code></pre>
</div>
</div>
<p>If you take a look at the new version of the table, you will see that all English labels (“standard deviation”, “observations”) are replaced with their Norwegian equivalents (“standardavvik”, “observasjoner”).</p>
<div style="page-break-after: always;"></div>
</section>
<section id="exporting-the-table-to-word" class="level3">
<h3 class="anchored" data-anchor-id="exporting-the-table-to-word">Exporting the table to Word</h3>
<p><code>oppsumtabell</code> also has an <em>export</em>-functionality: You can switch on the export-function to get a result that you can directly copy and paste into a Word document and then transform into a nice, publication-quality table.</p>
<p>For example, to export the last table from above you simply add <code>export=TRUE</code> to your code:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oppsumtabell</span>(<span class="at">dataset =</span> ess, </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">"agea"</span>,<span class="st">"height"</span>,<span class="st">"weight"</span>),</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">norsk =</span> <span class="cn">TRUE</span>,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">export =</span> <span class="cn">TRUE</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Variabel,agea,height,weight</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Observasjoner,143.00,142.00,138.00</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Gjennomsnitt, 47.91,173.76, 78.63</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 25. persentil, 33.50,167.25, 65.00</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Median, 46.00,174.00, 75.00</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 75. persentil, 62.00,180.00, 88.75</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Standardavvik, 18.57,  8.78, 19.20</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Minimum, 16.00,147.00, 50.00</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Maksimum, 90.00,196.00,182.00</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Manglende,  0.00,  1.00,  5.00</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This result arguably looks even less presentable than the other one, but:</p>
<ol type="1">
<li>Copy the result as it is displayed in the <em>Console</em> (see also the screenshot below);</li>
<li>Open a Word document;</li>
<li>Paste the copied text into the document;</li>
<li>Select the copied text and, in Word, open the ‘Table’ menu in the menu bar at the top; there, select ‘Convert’ and then `Convert text to table…’;</li>
<li>In the menu, under “Separate text at” (“Skill tekst ved”), select “Other” (“Annet”) and enter a comma into the field next to that option. The number of columns at the top should then also automatically adjust. Then click ‘OK’;</li>
<li>Polish the table using the familiar options in Word;</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="opps_excopy.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Selecting &amp; copying the results from the R console"><img src="opps_excopy.png" class="img-fluid figure-img" alt="Selecting &amp; copying the results from the R console"></a></p>
<figcaption>Selecting &amp; copying the results from the <code>R</code> console</figcaption>
</figure>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="using-oppsum_grupp" class="level3">
<h3 class="anchored" data-anchor-id="using-oppsum_grupp">Using <code>oppsum_grupp</code></h3>
<p>Sometimes you want summary statistics for one variable, but separately for different categories of another variable. For example, assume you are interested in whether (and if yes, by how much) Norwegian men are on average taller than Norwegian women.</p>
<p>The <code>oppsum_grupp()</code> function produces a summary table that contains the same statistics as the ones you get from <code>oppsumtabell()</code>, but now broken down by categories of a second variable (which should ideally have only a few distinct categories!).</p>
<p>To get summary statistics for body height for men and women separately (i.e., over the categories of <code>gndr</code>) you run:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oppsum_grupp</span>(<span class="at">dataset =</span> ess, <span class="at">variable =</span> <span class="st">"height"</span>, <span class="at">by.var =</span> <span class="st">"gndr"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="do">##  gndr   Observations Average Stand. Dev. 25th percentile Median 75th percentile</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  Female 67           167.87  6.66        164.00          168.00 173.00         </span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  Male   75           179.03  6.90        174.00          178.00 183.50         </span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  Minimum Maximum Missing</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  147.00  180.00  1      </span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  165.00  196.00  0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can see that men are, on average, around 11 centimeters taller than women, and that the smallest woman is smaller than the smallest man (and the same for the tallest individuals in the sample).</p>
<p>Like <code>oppsumtabell()</code>, <code>oppsum_grupp()</code> also has an export function (<code>export = TRUE</code>) and Norwegian language support (<code>norsk = TRUE</code>).</p>
<div style="page-break-after: always;"></div>
</section>
<section id="further-help" class="level3">
<h3 class="anchored" data-anchor-id="further-help">Further help</h3>
<p>You now know how to get quick summary statistics for a dataset or specific variables in a dataset. Of course, this tutorial covered only the essentials and there are many other ways to summarize your data. But these essentials should help you when you do your first steps as a political or social data analyst.</p>
<p>Also, if you want to get more detailed help on any of the functions covered in this tutorial, you can always resort to the functions’ help files. For example, to get the help file for the <code>mean()</code> or <code>oppsumtabell()</code> functions, you just type the following into your <em>Console</em> tab and press Enter:</p>
<ul>
<li><code>?mean</code></li>
<li><code>?oppsumtabell</code></li>
</ul>
<p>The help files also contain examples that show you how to use the functions. Feel free to explore!</p>
<div style="page-break-after: always;"></div>
</section>
</section>
</section>
<section id="importing-a-real-dataset-into-r" class="level1">
<h1>Importing a real dataset into <code>R</code></h1>
<p>Now you know how you can get familiar with a new dataset and do an <em>exploratory data analysis</em> (EDA) in <code>R</code>. The next step is get your hands on some real data. This is what you learn in this part of the tutorial and, if you like, the appendix.</p>
<section id="the-european-social-survey" class="level2">
<h2 class="anchored" data-anchor-id="the-european-social-survey">The <em>European Social Survey</em></h2>
<p>The <em>European Social Survey (ESS)</em> is a large survey project that is conducted in countries all over Europe, including in Norway, and which has been running for several years now. In each round, between several hundred to more than 2000 randomly selected persons in each participating country give information (anonymously, of course) about their political opinions and behavior, their views about society, and their income, jobs, work situation, and families. Their responses are then made machine-readable and stored in dataset files, which anyone can use for free.</p>
<p>You can use the <em>ESS</em> to study, for example, why people vote or participate otherwise politically (e.g., by joining demonstrations or protests), which parties they voted for, how people think about social inequality, climate change, sexuality, the welfare state, and many other topics. Political scientists and sociologists often use data from the <em>ESS</em> in their research.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
<p>See https://www.europeansocialsurvey.org/ for more details.</p>
<div style="page-break-after: always;"></div>
<section id="accessing-downloading-ess-data" class="level3">
<h3 class="anchored" data-anchor-id="accessing-downloading-ess-data">Accessing &amp; downloading <em>ESS</em> data</h3>
<p>You can access all data from the <em>ESS</em> via the SIKT Data Portal: https://ess.sikt.no/en/.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>Once you have the page open:</p>
<ol type="1">
<li>Scroll down and choose <em>ESS Round 7 – 2014. Immigration, Social inequalities in health</em>.</li>
<li>Choose <strong>ESS7 - integrated file, edition 2.3</strong>. You will then be forwarded to another page.</li>
<li>Click on the red “Download” button that is shown on the upper right of your screen.</li>
<li>You should then be forwarded a login page. Choose <em>“Logg in med Feide”</em> and use your UiS credentials to log in. (you may be able to jump over that step if you are already logged on to Feide, e.g., via <em>Canvas</em>).</li>
<li>Once you are logged in, you will be directed back to the ESS Data Portal – and you will now see three different download buttons (CSV, SPSS, Stata) on the upper right of your screen.</li>
<li>Click on the <strong>Stata</strong> button.</li>
<li>The data and a few other files will be downloaded as part of a compressed <em>ZIP</em> file. Unpack and open that file. The folder that opens will contain one file that ends with <code>.dta</code>.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></li>
<li><strong>The file ending with <code>.dta</code> is the dataset file. Copy/move this file into your project folder (in Windows File Explorer/Mac Finder).</strong> Ideally, give the file a shorter name that is easier to type (e.g., <code>ess7.dta</code>).</li>
</ol>
<p>Once you have your data file stored within your project folder, you can go back to <em>RStudio</em>.</p>
<p>Here, you can check if everything worked by opening the <em>Files</em> tab in the lower-right corner. The dataset file should be listed here (next to all the other files in this folder).</p>
<div style="page-break-after: always;"></div>
</section>
</section>
<section id="importing-data-with-haven-and-labelled" class="level2">
<h2 class="anchored" data-anchor-id="importing-data-with-haven-and-labelled">Importing data with <code>haven</code> and <code>labelled</code></h2>
<p><code>R</code> by itself can open <em>some</em> types of dataset files, but not all of them. Among the types of files that <code>R</code> itself cannot open are those that were created for other (commercial) data analysis programs:</p>
<ul>
<li><code>.sav</code>, the file format for <code>SPSS</code></li>
<li><code>.dta</code>, the file format for <code>Stata</code></li>
<li><code>.sas7bdat</code>, the file format for <code>SAS</code></li>
</ul>
<p>The ESS dataset file you just downloaded is a <code>.dta</code> file — which means this dataset is saved in the Stata file format, and <code>R</code> by itself cannot open it.</p>
<p>But, luckily, there are a few packages that allow you to import these types of files into <code>R</code>. One of these is the <code>haven</code> package, and this is the one we will be using in this course.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> <code>haven</code> is a part of the <code>tidyverse</code> collection (see https://haven.tidyverse.org/), which means that you already installed it when you installed the <code>tidyverse</code> earlier.</p>
<hr>
<p><em>Just in case</em>: If <code>R</code> gives you an error message (e.g., “Package <code>labelled</code> not found), you may have to quickly install the two packages with:</p>
<ul>
<li><code>install.packages("haven")</code></li>
<li><code>install.packages("labelled")</code></li>
</ul>
<hr>
<p><code>haven</code> includes three functions to import the three main “commercial” dataset file formats:</p>
<ul>
<li><code>read_sav()</code> for <code>.sav</code> files</li>
<li><code>read_dta()</code> for <code>.dta</code> files</li>
<li><code>read_sas()</code> for <code>.sas7bdat</code> files</li>
</ul>
<p>Therefore, to import the <em>ESS</em> dataset that you just downloaded in <code>.dta</code> format, you would use <code>read_dta()</code>.</p>
<p><em>Important:</em> <code>haven</code> has a bit of a quirk in that it has its own way of organizing a dataset within <code>R</code> – called the <code>labelled</code> format – and that can take a bit to get used. To keep things simple, we convert the dataset to the “normal” format for <code>R</code>. To do that, we use the <code>labelled::unlabelled()</code> function.</p>
<div style="page-break-after: always;"></div>
<p>Putting all this together: To import the dataset file, you would use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>ess7 <span class="ot">&lt;-</span> labelled<span class="sc">::</span><span class="fu">unlabelled</span>(haven<span class="sc">::</span><span class="fu">read_dta</span>(<span class="st">"ess7.dta"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here, <code>haven::read_dta()</code> uses the <code>read_dta()</code> function from <code>haven</code> to import the dataset – and then we directly convert it with <code>labelled::unlabelled()</code> and save the result as <code>ess7</code>.</p>
<div style="page-break-after: always;"></div>
<section id="generating-a-data-dictionary" class="level3">
<h3 class="anchored" data-anchor-id="generating-a-data-dictionary">Generating a data dictionary</h3>
<p>If you take a quick look at the <code>ess7</code> data object in the <em>Environment</em>, you notice that it contains 601 variables. Such a large number of variables is typical for a real-life survey dataset, but it also means that it can be difficult to get an overview over all the variables and their values.</p>
<p>Fortunately, there is a function to easily create a <em>data dictionary</em> or <em>codebook</em> that is included in <code>labelled</code>: the <code>generate_dictionary()</code> function.</p>
<p>Using this function is easy — you just need to make sure to save the function’s output in a new object like <code>dict_ess7</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>dict_ess7 <span class="ot">&lt;-</span> labelled<span class="sc">::</span><span class="fu">generate_dictionary</span>(ess7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You will now see a new object in your <em>Environment</em> called <code>dict_ess7</code>.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> If you now run <code>View(dict_ess7)</code>, you get a neat table that shows you the name, label, and value labels of all the variables in your dataset.</p>
<p>Now you know how you can get survey data for Norway and many other countries on a wide variety of topics from a highly trusted source! Take also a few minutes to explore the ESS website and their Data Portal to see which topics they cover and which variables they have in each survey round!</p>
<!-- **Next step:** You explore the full ESS dataset in the Exercises. -->
<!-- See also the official package "vignette" (https://cran.r-project.org/web/packages/essurvey/vignettes/intro_ess.html) for more on the `essurvey` package. -->
<div style="page-break-after: always;"></div>
<!-- In this first exercise, you repeat the main points from the previous tutorial on data loading. -->
<!-- 1. Load the `haven` package using `library()`; -->
<!-- 2. Go to https://www.cpds-data.org/index.php/data and copy the link to the Stata version of the CPDS dataset; -->
<!-- 3. Use the `read_dta()` function from the `haven` package to download the CPDS dataset and save it as `cpds` in `R`; -->
<!-- (Obviously, feel free to take a peek at the previous tutorial. You should find all the information you need there.) -->
<!-- ## Exercise 2 -->
<!-- Now that you have loaded the CPDS dataset, do some exploring: -->
<!-- 1. Use the `head()` function to look at the first few observations in the dataset. -->
<!-- 2. How many observations and variables does the CPDS dataset contain? -->
<!-- 3. Get summary statistics for the entire dataset using `summary()`. Do you find the result helpful? -->
<!-- 4. Get summary statistics for individual variables: -->
<!--     + Use `summary()` to get summary statistics for the share of left parties in government (`gov_left1`); be careful not to forget to use the dollar sign, and take a look at the dataset codebook (available from https://www.cpds-data.org/index.php/data to see what exactly the variable measures); -->
<!--     + Can you interpret the different statistics you get? -->
<!--     + What happens if you try the same with the `country` variable? -->
<!-- 5. Can you get the list of countries included in the dataset using the `unique()` function? Can you do the same for the years covered? -->
<!-- 6. Take a look at the raw dataset using `View()`. Can you see how the dataset is structured? -->
<!-- ## Exercise 3 -->
<!-- You now have a rough sense of what the dataset looks like --- which countries and time periods are covered --- and you saw summary statistics for a single variable, `gov_left1`. -->
<!-- In this exercise, you calculate single summary statistics for selected variables (always remember to use the dollar sign when referring to specific variables from the CPDS dataset in your function): -->
<!-- 1. Calculate the mean ('average') and median of `womenpar`, the share of women in parliament in each country and year. Are you happy with the results? What happens if you remove missing observations, `NA`s (hint: `rm.na`)? -->
<!-- 2. Now calculate the variance and standard deviation of `womenpar`. -->
<!-- 3. Interpret all four statistics (refer again to the codebook to see how `womenpar` is measured). What do you learn about female political representation in the economically advanced democracies? -->
<!-- ## Exercise 4 -->
<!-- In this final exercise, you dive a bit deeper into the issue of female representation using the custom `oppsumtabell()` and `oppsum_grupp()` functions: -->
<!-- 1. Let `R` give you summary statistics for the `womenpar` variable alone using the `oppsumtabell()` function. Interpret each of the statistics. -->
<!-- 2. Go to the CPDS codebook and look for the variable indicating membership in the European Union (`eu`). Read the brief description, then use the `unique()` function to let `R` give you its unique categories. What do `1` and `0` mean here? -->
<!-- 3. Use `oppsum_grupp()` to calculate summary statistics of `womenpar` for countries that are EU members and for those who are not. What is your impression? Do EU countries have more or fewer women in parliament than non-EU countries? -->
<!-- 4. Now use `oppsum_grupp()` to get statistics of `womenpar` across countries (`R` will ask you if you are sure that you want to proceed; say yes). Can you find Norway? How does Norway compare to other countries, for example to the United States, Sweden, or France? -->
</section>
</section>
</section>
<section id="de-bugging-exercises" class="level1">
<h1>De-bugging exercises</h1>
<p>The final part of this tutorial (and the next three) are interactive de-bugging challenges. You will get a set of code ‘chunks’ that have some problem in them — and your job is to fix these problems.</p>
<ol type="1">
<li>In <code>RStudio</code>, navigate to the <em>Tutorial</em> tab (upper-right corner of your screen, where the <em>Environment</em> tab is).</li>
<li>Start the interactive exercise for this tutorial (<em>“De-bugging exercises: Getting to know your data”</em>), pop out the window (the little button between the house and red stop button) and maximize, and follow the instructions there.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></li>
</ol>
<!-- \newpage -->
<!-- # (Voluntary!) Importing other types of datasets -->
<!-- Now you know how to import data from the European Social Survey into `R` and do an exploratory data analysis. But, obviously, the ESS is only one of many, many datasets that you can use.^[See e.g., https://github.com/erikgahner/PolData for an overview over datasets for political and social research.] And not all datasets will be available in `SPSS`- or `Stata`-format. Some will only be available Excel (`.xls` or `.xlsx`) files. -->
<!-- In this voluntary extra part of the tutorial, you will learn how you can import datasets that are stored in this format, and also how you can download and import files directly from a website. -->
<!-- \newpage -->
<!-- ## The *Comparative Political Data Set* -->
<!-- A widely used dataset in political science and sociology is the *Comparative Political Data Set* or CPDS. This dataset is maintained by a team at the University of Berne in Switzerland (see https://cpds-data.org/).   -->
<!-- As the name suggests, the CPDS is a *comparative* or *cross-country comparative* dataset: Where the ESS includes data on *individual citizens*, the CPDS includes data on *countries*. With this dataset, you can for example compare countries' political institutions, their party systems, their welfare states and labor market policies, and economic performance. In this dataset, the units of observation are countries --- or, more accurately, country-years. -->
<!-- \newpage -->
<!-- ## Taking a look at the CPDS in Excel -->
<!-- To get famililar with the CPDS, you will first take a look at it in a format that you are probably used to: Microsoft Excel. If you go to https://www.cpds-data.org/index.php/data, you see listed under **Data** two links, one to a Stata file and one to an Excel file.  -->
<!-- <!-- Many people who share their datasets online do indeed store these as Excel files. You can recognize that something is an Excel file if its name as shown in the Windows File Explorer/Mac Finder ends with `.xslx` or `.xls`.^[Does your computer not show you any file extensions? You can adjust this easily. Windows users: Open the File Explorer ("*Filutforsker*"); open the "View" tab ("*Visning*"); check the box called "File name extensions" ("*Filtyper*"). Mac users: Go to Finder and open the Preferences menu; open the *Advanced* tab; check the box that says "*Show all filename extensions*".] -->
<p>–&gt;</p>
<!-- <!-- An example is the *Comparative Political Data Set*.  -->
<p>–&gt;</p>
<!-- Click on the **Excel** link to download the dataset to your computer. Then open the file in Excel to take a look. You should see something similar to the screenshot below: -->
<!-- ![The CPDS dataset in Excel](cpds_xl.png) -->
<!-- Just lots and lots of boring data. You also see different country names and years --- every single row represents a single country in a single year. Therefore, the unit of observation is country-years.  -->
<!-- \newpage -->
<!-- ## Importing the CPDS as a Stata (`.dta`) file -->
<!-- If you now go back to the website of the CPDS dataset (https://www.cpds-data.org/index.php/data), you see that there is also a link to download the dataset as a Stata (`.dta`) file. This is the file that you will now import into `R`. -->
<!-- ### Using `haven` to import the CPDS dataset -->
<!-- Now to the interesting part: Importing the dataset into `R`. -->
<!-- Theoretically, you could now download the `.dta` file to your computer, store it into your working directory, and then import it from there. -->
<!-- But there is also an easier way: You can directly download it using the link on the CPDS website! To download and import the dataset via the link, you need to go back to the CPDS website and copy the link to the `Stata` file (right-click on the link in your browser; "Copy link"). -->
<!-- Then you use that link in the `read_dta()` function like this: -->
<!-- ```{r readdta, eval=F, echo=T} -->
<!-- cpds <- read_dta("https://www.cpds-data.org/images/Update2021/CPDS_1960-2019_Update_2021.dta") -->
<!-- ``` -->
<!-- This code does the following: -->
<!-- 1. `read_dta()` uses the link to download and import the CPDS data file... -->
<!-- 2. ...and the result --- the dataset --- gets saved into the `cpds` object with the assignment operator -->
<!-- If all worked, then you should see the `cpds` object appear in your working environment (in the upper-right corner of your screen). -->
<!-- \newpage -->
<!-- ### What you see -->
<!-- Just from the information you should see now, you can tell that the `cpds` dataset includes 1759 observations and 323 variables (at the time I'm writing this at least). -->
<!-- As before, you can get more detailed information about the variables included in the dataset if you click on the little blue circle with the white "play" symbol inside (just to the left of `cpds` in the environment). Once you click on this, a list of **variable names** unfolds, for example `year`, `country`, or `iso`. -->
<!-- ![The CPDS dataset in `R`](cpds-dta.png) -->
<!-- You see that there are different variables (`year`,...) and some extra lines reading `attr()`, containing the variables' labels. -->
<!-- You can again look at the data directly using `View(cpds)` --- it should look basically as it did in Excel, only that you get more informative labels for your variables. -->
<!-- \newpage -->
<!-- ## Importing Excel (`.xls`/`.xlsx`) files -->
<!-- Excel is widely used and there is therefore a way to import Excel dataset files into `R`. To do this, you need to install yet another package: `readxl` ("read Excel" --- the last symbol is a small L, not a 1). -->
<!-- You already know how to install and load packages, so I trust that you can install the `readxl` package by yourself. -->
<!-- \newpage -->
<!-- ### Importing the CPDS dataset as an Excel file -->
<!-- Earlier you downloaded and opened the CPDS dataset as an Excel file --- now you will import that file into `R`. -->
<!-- **Important:** Unlike `haven`, `readxl` cannot download files directly from the internet. This means that if you want to import an Excel file with `readxl`, you first have to download it to your computer and then open the file from there. -->
<!-- The easiest way to do this is to save the CPDS Excel file into your `R` project folder (the one you created in the first tutorial). -->
<!-- Once you have the CPDS Excel-file stored in your project folder, you can import it with `readxl`. -->
<!-- Specifically, you use the `read_excel()` function, which can import both the older `.xls` and the newer `.xlsx` formats. You use `read_excel()` similarly to how you use `read_dta()` from `haven`.  -->
<!-- For example, with the CPDS data file this would look like this: -->
<!-- ```{r readxl, eval=F, echo=T} -->
<!-- cpds <- read_excel("CPDS_1960-2019_Update_2021.xlsx") -->
<!-- ``` -->
<!-- Once you run the function, the dataset should appear in your *Environment* tab. Most likely, it will look a bit different compared to when the dataset was imported with `haven`, but the dataset itself will be the same. -->
<!-- There are many different ways to read data from Excel files --- you can read specific *sheets* from a larger file, or also only parts of a sheet. See the `readxl` documentation for details: https://readxl.tidyverse.org/ -->
<!-- ### De-bugging exercises -->
<!-- There are also some de-bugging exercises specifically for this last voluntary part of the data-import tutorial. You can access these via *Tutorials* ("Getting your data into R"). -->


</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Did you miss that session? You can read about <em>Projects</em> and how you create them here: https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects or in <em>Lær deg R</em>, 4.1.1.3.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>It does also work with factor variables, but you will get a warning message.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Examples are: Rehm, P. (2009). Risks and redistribution: An individual-level analysis. <em>Comparative Political Studies</em>, 42(7):855–81; Giger, N. and Nelson, M. (2013). The welfare state or the economy? Preferences, constituencies, and strategies for retrenchment. <em>European Sociological Review</em>, 29(5):1083–94; Hooghe, M., Reeskens, T., Stolle, D., and Trappers, A. (2009). Ethnic diversity and generalized trust in Europe: A cross-national multilevel study. <em>Comparative Political Studies</em>, 42(2):198– 223; Gallego, A. (2007). Unequal political participation in Europe. <em>International Journal of Sociology</em>, 37(4):10–25; or Finseraas, H. (2008). Immigration and preferences for redistribution: An empirical analysis of European survey data. <em>Comparative European Politics</em>, 6(4):407–431.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Alternatively, go to https://www.europeansocialsurvey.org/ and click on “Data” in the menu at the top. On the following page, click on “ESS Data Portal” button.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>If you cannot see the file endings (“extensions”), you need to activate this in File Explorer/Finder. You should find instructions for your particular operating system if you google for example “show file extensions in Windows” or “show file extensions in Mac”.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Other alternatives are <code>foreign</code>, <code>memisc</code>, or <code>readstata13</code>.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Technically, the <code>dict_ess7</code> dictionary is itself a dataset-type object, which means you can also do some data exploration with it. This goes beyond the scope of this tutorial, but feel free to play around with it.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p>If there are no tutorials called <em>“De-bugging exercises:…”</em> shown, just restart <code>R</code> by clicking on “Session” in the menu at the top of your screen, and there on “Restart R”. You may also have to install the <code>learnr</code> package — in that case, <code>RStudio</code> will let you know and you only have to do this once.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./tutorial_1.html" class="pagination-link" aria-label="Tutorial 1: Your first steps in `R`">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Tutorial 1: Your first steps in <code>R</code></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","selector":".lightbox","openEffect":"zoom","loop":false});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>